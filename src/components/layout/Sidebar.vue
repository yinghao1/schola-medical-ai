<template>
  <aside class="sidebar">
    <!-- Logo 和顶部区域 -->
    <div class="sidebar-top">
      <div class="logo-area">
        <!-- Logo SVG - shouye logo.svg -->
        <svg width="160" height="35" viewBox="0 0 160 35" fill="none">
          <path d="M0 12.191L21.4281 0L42.8562 12.191L21.4281 24.3819L0 12.191Z" fill="#D9D9D9"/>
          <path d="M8.22845 16.3714V27.5051L21.4447 35L34.4172 27.6433V16.1816L21.4447 6.07666L8.22845 16.3714Z" fill="url(#paint0_linear_sidebar)"/>
          <path d="M34.4172 17.1438L34.2874 16.9229L21.7003 24.0626V24.0638L17.8613 21.8863L13.3207 24.4618L21.7012 29.2153V29.2131L34.4172 22.0003V17.1438Z" fill="url(#paint1_linear_sidebar)"/>
          <path d="M0 12.191L21.4281 0L42.8562 12.191L21.4281 24.3819L0 12.191Z" fill="url(#paint2_linear_sidebar)"/>
          <path d="M92.3533 20.2067H94.4541V27.8825H92.3533V20.2067ZM95.0197 17.5403L99.7059 20.6107L98.5478 22.3882L91.1683 17.5403H85.0546C84.6416 18.079 84.1478 18.5728 83.5733 19.0216C83.0167 19.4705 82.4331 19.8745 81.8226 20.2336C81.2122 20.5748 80.6017 20.88 79.9912 21.1493C79.3987 21.4007 78.8511 21.6162 78.3483 21.7957C77.8635 21.9753 77.4595 22.1099 77.1363 22.1997C76.8132 22.2895 76.6336 22.3344 76.5977 22.3344L76.3553 21.3109L76.086 20.2875C76.3912 20.2156 76.7772 20.0989 77.2441 19.9373C77.7289 19.7757 78.2406 19.5782 78.7792 19.3448C79.3359 19.1114 79.8925 18.8421 80.4491 18.5368C81.0236 18.2316 81.5533 17.8994 82.0381 17.5403H77.8905V7.68297L97.9553 7.68296V15.1164C97.9553 15.7987 97.7129 16.3733 97.2281 16.8401C96.7613 17.3069 96.1957 17.5403 95.5314 17.5403H95.0197ZM95.5314 15.4396C95.6212 15.4396 95.693 15.4127 95.7468 15.3588C95.8007 15.287 95.8276 15.2062 95.8276 15.1164V13.6082H88.9867V15.4396H95.5314ZM95.8276 9.81065H88.9867V11.4805H95.8276V9.81065ZM80.0181 9.81065V11.4805H86.8591V9.81065H80.0181ZM80.0181 15.4396H86.8591V13.6082H80.0181V15.4396ZM82.092 20.2067H84.1927V22.4152L84.1658 22.5767C83.9324 23.4206 83.5284 24.1658 82.9538 24.8122C82.3792 25.4586 81.7867 26.0062 81.1763 26.4551C80.5658 26.9219 80.0181 27.281 79.5334 27.5324C79.0665 27.7837 78.8062 27.9184 78.7523 27.9364L78.3214 26.9668L77.8905 26.0241C78.1239 25.9164 78.4471 25.7369 78.86 25.4855C79.273 25.2521 79.686 24.9648 80.0989 24.6236C80.5299 24.2825 80.9249 23.9054 81.284 23.4925C81.661 23.0615 81.9304 22.6037 82.092 22.1189V20.2067Z" fill="black"/>
          <path d="M73.0959 15.0625L71.1298 15.8705L68.4365 9.29889H61.4609V7.17121H69.8639L73.0959 15.0625ZM56.4515 15.7089L55.5896 15.1164C55.5896 15.1164 55.7153 14.9188 55.9667 14.5238C56.218 14.1109 56.5143 13.5453 56.8555 12.8271C57.2146 12.1089 57.5916 11.265 57.9866 10.2954C58.3816 9.32582 58.7318 8.25749 59.037 7.09041L61.0839 7.62906C60.7607 8.86797 60.3836 10.0171 59.9527 11.0764C59.5397 12.1178 59.1447 13.0156 58.7677 13.7697C58.3906 14.5238 58.0584 15.1253 57.7712 15.5742C57.5018 16.0051 57.3582 16.2385 57.3402 16.2745L56.4515 15.7089ZM61.1916 14.1468V19.1563C61.6225 18.9408 62.1343 18.6625 62.7268 18.3213C63.3193 17.9802 63.9567 17.5942 64.639 17.1632C65.3393 16.7144 66.0575 16.2296 66.7936 15.7089C67.5477 15.1702 68.2929 14.5957 69.029 13.9852L70.3757 15.6281C69.424 16.4181 68.4724 17.1453 67.5208 17.8096C66.5692 18.456 65.6804 19.0306 64.8545 19.5333C64.0285 20.0361 63.2924 20.458 62.646 20.7992C61.9996 21.1223 61.5148 21.3647 61.1916 21.5263V25.8356H68.6789C68.8764 25.8356 68.9752 25.7278 68.9752 25.5124V22.1189H71.1029V25.5124C71.1029 26.1947 70.8605 26.7692 70.3757 27.2361C69.9088 27.7029 69.3433 27.9363 68.6789 27.9363H59.0639V14.1468H61.1916ZM55.2395 11.4535L49.5028 9.02956L50.3108 7.06348L56.0744 9.51435L55.2395 11.4535ZM51.9806 14.1468H48.8564V12.046H54.0814V23.654L55.9128 22.8191L56.8016 24.7313L49.9338 27.9094L49.045 25.9972L51.9806 24.6505V14.1468Z" fill="black"/>
          <path d="M153.485 17.7427H152.018L147.87 27.2768H149.769L150.631 25.0953L151.53 22.8108L152.704 19.7626L153.565 22.0363L155.112 25.9339H155.106L155.653 27.2768H157.593L153.485 17.7427Z" fill="black"/>
          <path d="M141.953 17.7427H143.65V25.7417H147.703V27.2768H141.953V17.7427Z" fill="black"/>
          <path d="M130.223 22.5502C130.223 21.7871 130.348 21.0958 130.6 20.4764C130.851 19.848 131.197 19.3138 131.637 18.8739C132.086 18.434 132.615 18.0973 133.226 17.8639C133.845 17.6215 134.523 17.5003 135.259 17.5003C136.004 17.4914 136.687 17.6036 137.306 17.837C137.926 18.0614 138.46 18.3936 138.909 18.8335C139.357 19.2734 139.708 19.8031 139.959 20.4225C140.21 21.042 140.336 21.7333 140.336 22.4963C140.336 23.2415 140.21 23.9193 139.959 24.5298C139.708 25.1402 139.357 25.6654 138.909 26.1053C138.46 26.5452 137.926 26.8909 137.306 27.1422C136.687 27.3846 136.004 27.5103 135.259 27.5193C134.523 27.5193 133.845 27.4026 133.226 27.1692C132.615 26.9268 132.086 26.5901 131.637 26.1592C131.197 25.7193 130.851 25.1941 130.6 24.5836C130.348 23.9732 130.223 23.2954 130.223 22.5502ZM132 22.4425C132 22.9542 132.077 23.4255 132.229 23.8565C132.391 24.2874 132.615 24.6599 132.903 24.9742C133.19 25.2884 133.531 25.5353 133.926 25.7148C134.33 25.8944 134.779 25.9841 135.273 25.9841C135.766 25.9841 136.215 25.8944 136.619 25.7148C137.023 25.5353 137.369 25.2884 137.656 24.9742C137.943 24.6599 138.163 24.2874 138.316 23.8565C138.478 23.4255 138.558 22.9542 138.558 22.4425C138.558 21.9667 138.478 21.5223 138.316 21.1093C138.163 20.6963 137.943 20.3372 137.656 20.032C137.369 19.7178 137.023 19.4754 136.619 19.3048C136.215 19.1253 135.766 19.0355 135.273 19.0355C134.779 19.0355 134.33 19.1253 133.926 19.3048C133.531 19.4754 133.19 19.7178 132.903 20.032C132.615 20.3372 132.391 20.6963 132.229 21.1093C132.077 21.5223 132 21.9667 132 22.4425Z" fill="black"/>
          <path d="M120.754 17.7427H122.451V21.5402H126.908V17.7427H128.605V27.2768H126.908V23.0753H122.451V27.2768H120.754V17.7427Z" fill="black"/>
          <path d="M118.079 19.9781C117.729 19.6011 117.388 19.3497 117.056 19.224C116.732 19.0983 116.405 19.0355 116.073 19.0355C115.579 19.0355 115.13 19.1252 114.726 19.3048C114.331 19.4754 113.99 19.7178 113.703 20.032C113.415 20.3372 113.191 20.6963 113.029 21.1093C112.877 21.5223 112.8 21.9666 112.8 22.4425C112.8 22.9542 112.877 23.4255 113.029 23.8564C113.191 24.2873 113.415 24.6599 113.703 24.9741C113.99 25.2883 114.331 25.5352 114.726 25.7148C115.13 25.8943 115.579 25.9841 116.073 25.9841C116.459 25.9841 116.831 25.8943 117.19 25.7148C117.558 25.5262 117.9 25.23 118.214 24.826L119.614 25.8225C119.183 26.415 118.658 26.8459 118.039 27.1153C117.419 27.3846 116.759 27.5193 116.059 27.5193C115.323 27.5193 114.645 27.4026 114.026 27.1691C113.415 26.9267 112.886 26.5901 112.437 26.1592C111.997 25.7193 111.651 25.1941 111.4 24.5836C111.148 23.9731 111.023 23.2953 111.023 22.5502C111.023 21.7871 111.148 21.0958 111.4 20.4764C111.651 19.8479 111.997 19.3138 112.437 18.8739C112.886 18.434 113.415 18.0973 114.026 17.8639C114.645 17.6215 115.323 17.5003 116.059 17.5003C116.705 17.5003 117.303 17.617 117.85 17.8504C118.407 18.0749 118.923 18.4609 119.399 19.0085L118.079 19.9781Z" fill="black"/>
          <path d="M108.474 19.7896C108.294 19.5292 108.052 19.3407 107.747 19.224C107.451 19.0983 107.136 19.0355 106.804 19.0355C106.607 19.0355 106.414 19.0579 106.225 19.1028C106.046 19.1477 105.879 19.2195 105.727 19.3183C105.583 19.417 105.467 19.5472 105.377 19.7088C105.287 19.8614 105.242 20.0454 105.242 20.2609C105.242 20.5841 105.354 20.831 105.579 21.0016C105.803 21.1721 106.081 21.3203 106.414 21.4459C106.746 21.5716 107.109 21.6928 107.504 21.8095C107.899 21.9262 108.263 22.0878 108.595 22.2943C108.927 22.5008 109.206 22.7746 109.43 23.1158C109.655 23.4569 109.767 23.9103 109.767 24.4759C109.767 24.9876 109.673 25.4365 109.484 25.8225C109.295 26.1996 109.04 26.5138 108.716 26.7652C108.402 27.0165 108.034 27.2051 107.612 27.3307C107.19 27.4564 106.746 27.5193 106.279 27.5193C105.686 27.5193 105.116 27.4205 104.569 27.223C104.021 27.0255 103.55 26.6933 103.155 26.2265L104.434 24.9876C104.641 25.3018 104.91 25.5487 105.242 25.7282C105.583 25.8988 105.942 25.9841 106.319 25.9841C106.517 25.9841 106.714 25.9572 106.912 25.9033C107.109 25.8494 107.289 25.7686 107.451 25.6609C107.612 25.5532 107.742 25.4185 107.841 25.2569C107.94 25.0863 107.989 24.8933 107.989 24.6779C107.989 24.3277 107.877 24.0584 107.653 23.8699C107.428 23.6814 107.15 23.5242 106.818 23.3986C106.485 23.2639 106.122 23.1382 105.727 23.0215C105.332 22.9048 104.968 22.7477 104.636 22.5502C104.304 22.3437 104.026 22.0744 103.801 21.7422C103.577 21.4011 103.465 20.9477 103.465 20.3821C103.465 19.8883 103.563 19.4619 103.761 19.1028C103.967 18.7437 104.232 18.4474 104.555 18.214C104.887 17.9716 105.265 17.7921 105.686 17.6754C106.108 17.5587 106.539 17.5003 106.979 17.5003C107.482 17.5003 107.967 17.5766 108.434 17.7292C108.909 17.8819 109.336 18.1332 109.713 18.4833L108.474 19.7896Z" fill="black"/>
          <defs>
            <linearGradient id="paint0_linear_sidebar" x1="5.89483e-08" y1="12.9377" x2="35.3435" y2="40.5154" gradientUnits="userSpaceOnUse">
              <stop stop-color="#8BFDF1"/>
              <stop offset="1" stop-color="#59FEB0"/>
            </linearGradient>
            <linearGradient id="paint1_linear_sidebar" x1="-5.9451e-07" y1="4.35498" x2="50.8538" y2="23.5296" gradientUnits="userSpaceOnUse">
              <stop offset="0.0527365" stop-color="#33C4B6"/>
              <stop offset="1" stop-color="#61F7F9"/>
            </linearGradient>
            <linearGradient id="paint2_linear_sidebar" x1="4.43933" y1="7.30159" x2="40.0045" y2="19.1599" gradientUnits="userSpaceOnUse">
              <stop stop-color="#49DFF6"/>
              <stop offset="1" stop-color="#010BFE"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
      <button class="collapse-btn">
        <!-- Action Icons.svg -->
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M7.36173 1.80746V18.2068M1.5 3.84483C1.5 2.54981 2.54981 1.5 3.84483 1.5H16.1552C17.4502 1.5 18.5 2.54981 18.5 3.84483V16.1552C18.5 17.4502 17.4502 18.5 16.1552 18.5H3.84483C2.54981 18.5 1.5 17.4502 1.5 16.1552V3.84483Z" stroke="#4E5969" stroke-width="1.625" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <!-- 功能导航 -->
    <nav class="nav-section">
      <div class="nav-list">
        <div
          v-for="item in navItems"
          :key="item.id"
          @click="handleNavClick(item)"
          :class="['nav-item', { 'nav-item-active': activeNav === item.id }]"
        >
          <div class="nav-item-content">
            <component :is="item.icon" class="nav-icon" />
            <span class="nav-label">{{ item.label }}</span>
          </div>
        </div>
      </div>
    </nav>

    <!-- 历史会话 -->
    <div class="history-section">
      <div class="history-title-wrapper">
        <span class="history-title">历史会话</span>
      </div>
      <div class="history-list">
        <div
          v-for="item in historyItems"
          :key="item.id"
          @click="handleHistoryClick(item)"
          class="history-item"
        >
          <div class="history-dot-wrapper">
            <!-- Frame 39518.svg - 聊天气泡图标 -->
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <rect width="20" height="20" rx="10" fill="white"/>
              <path d="M10.0014 10.1526C9.96149 10.1519 9.92345 10.1355 9.89557 10.107C9.86769 10.0784 9.85222 10.04 9.85254 10.0001C9.85254 9.91608 9.91977 9.84766 10.0014 9.84766" stroke="#4E5969" stroke-width="1.05" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7.41767 10.1478C7.39813 10.1476 7.3788 10.1436 7.3608 10.136C7.3428 10.1283 7.32648 10.1172 7.31277 10.1033C7.29906 10.0894 7.28823 10.0729 7.28089 10.0548C7.27356 10.0366 7.26987 10.0173 7.27002 9.99771C7.27002 9.91488 7.33605 9.84766 7.41767 9.84766" stroke="#4E5969" stroke-width="1.05" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12.5871 10.1478C12.5676 10.1476 12.5482 10.1436 12.5302 10.136C12.5122 10.1283 12.4959 10.1172 12.4822 10.1033C12.4685 10.0894 12.4577 10.0729 12.4503 10.0548C12.443 10.0366 12.4393 10.0173 12.4395 9.99771C12.4395 9.91488 12.5055 9.84766 12.5871 9.84766" stroke="#4E5969" stroke-width="1.05" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M10.0044 10.1526C10.0243 10.1524 10.0439 10.1483 10.0622 10.1406C10.0805 10.1328 10.0971 10.1216 10.111 10.1074C10.1249 10.0933 10.1359 10.0765 10.1434 10.0581C10.1508 10.0397 10.1546 10.02 10.1544 10.0001C10.1546 9.98025 10.1508 9.96055 10.1434 9.94213C10.1359 9.92372 10.1249 9.90696 10.111 9.8928C10.0971 9.87865 10.0805 9.86737 10.0622 9.85963C10.0439 9.85188 10.0243 9.84781 10.0044 9.84766" stroke="#4E5969" stroke-width="1.05" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7.41748 10.1478C7.43703 10.1476 7.45635 10.1436 7.47435 10.136C7.49235 10.1283 7.50867 10.1172 7.52238 10.1033C7.53609 10.0894 7.54693 10.0729 7.55426 10.0548C7.5616 10.0366 7.56529 10.0173 7.56513 9.99771C7.56529 9.97816 7.5616 9.95877 7.55426 9.94065C7.54693 9.92253 7.53609 9.90603 7.52238 9.8921C7.50867 9.87817 7.49235 9.86707 7.47435 9.85944C7.45635 9.85182 7.43703 9.84781 7.41748 9.84766" stroke="#4E5969" stroke-width="1.05" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12.5879 10.1478C12.6074 10.1476 12.6268 10.1436 12.6448 10.136C12.6628 10.1283 12.6791 10.1172 12.6928 10.1033C12.7065 10.0894 12.7173 10.0729 12.7247 10.0548C12.732 10.0366 12.7357 10.0173 12.7355 9.99771C12.7357 9.97816 12.732 9.95877 12.7247 9.94065C12.7173 9.92253 12.7065 9.90603 12.6928 9.8921C12.6791 9.87817 12.6628 9.86707 12.6448 9.85944C12.6268 9.85182 12.6074 9.84781 12.5879 9.84766" stroke="#4E5969" stroke-width="1.05" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M10.0016 4.59814C9.01932 4.59848 8.05562 4.86625 7.21394 5.37274C6.37225 5.87923 5.68435 6.60533 5.22403 7.47312C4.76522 8.34069 4.55233 9.31718 4.6084 10.297C4.66447 11.2768 4.98735 12.2226 5.54213 13.0322L5.19961 14.8L7.12067 14.5519C7.82914 14.9963 8.631 15.2704 9.46326 15.3526C10.2955 15.4348 11.1355 15.3229 11.9172 15.0257C12.6989 14.7285 13.4011 14.254 13.9685 13.6397C14.5359 13.0253 14.9532 12.2877 15.1874 11.4849C15.4198 10.6823 15.462 9.83655 15.3107 9.01477C15.1594 8.193 14.8188 7.41775 14.3159 6.75048C13.8127 6.08197 13.1611 5.53955 12.4124 5.16603C11.6636 4.79251 10.8384 4.5981 10.0016 4.59814Z" stroke="#4E5969" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="history-text-wrapper">
            <span class="history-text">{{ item.title }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 用户信息底栏 -->
    <div class="user-section">
      <div class="user-info-wrapper">
        <div class="user-content">
          <div class="user-avatar">
            <!-- Profile.svg -->
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none">
              <rect width="36" height="36" rx="18" fill="url(#paint0_linear_profile)"/>
              <mask id="mask0_profile" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="36" height="36">
                <rect width="36" height="36" rx="18" fill="url(#paint1_linear_profile)"/>
              </mask>
              <g mask="url(#mask0_profile)">
                <g opacity="0.9">
                  <path d="M17.9983 21.8572C25.8092 21.8572 32.1412 27.7934 32.1412 35.1161C32.1412 42.4388 25.8092 48.3751 17.9983 48.3751C10.1874 48.3751 3.85547 42.4389 3.85547 35.1161C3.85547 27.7934 10.1874 21.8572 17.9983 21.8572Z" fill="white"/>
                  <path d="M17.9983 7.71436C21.4156 7.71436 24.1858 10.4846 24.1858 13.9019C24.1858 17.3191 21.4156 20.0894 17.9983 20.0894C14.5811 20.0894 11.8108 17.3191 11.8108 13.9019C11.8108 10.4846 14.5811 7.71436 17.9983 7.71436Z" fill="white"/>
                </g>
              </g>
              <defs>
                <linearGradient id="paint0_linear_profile" x1="20.75" y1="-0.816756" x2="20.75" y2="30" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#4080FF"/>
                  <stop offset="1" stop-color="#49DFF6"/>
                </linearGradient>
                <linearGradient id="paint1_linear_profile" x1="20.75" y1="0" x2="20.75" y2="36" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#3460E0"/>
                  <stop offset="1" stop-color="#49DFF6"/>
                </linearGradient>
              </defs>
            </svg>
          </div>
          <div class="user-details">
            <span class="user-name">李医生</span>
            <!-- por.svg - 专业版徽章 -->
            <svg width="45" height="20" viewBox="0 0 45 20" fill="none" class="user-badge-svg">
              <rect x="0.5" y="0.5" width="44" height="19" rx="3.5" fill="url(#paint0_linear_por)"/>
              <rect x="0.5" y="0.5" width="44" height="19" rx="3.5" stroke="url(#paint1_linear_por)"/>
              <path d="M1 5C1 2.79086 2.79086 1 5 1H40.5002L1 17.0001V5Z" fill="#63648D" fill-opacity="0.51"/>
              <path d="M6.506 7.681H9.575C9.663 7.34 9.74 6.999 9.828 6.669H7.265V5.602H10.07C10.158 5.184 10.235 4.777 10.323 4.359L11.5 4.458C11.434 4.854 11.357 5.228 11.291 5.602H15.834V6.669H11.06C10.983 7.021 10.906 7.351 10.829 7.681H16.494V8.781H10.532C10.411 9.177 10.29 9.562 10.169 9.914H15.207V10.904C14.723 11.619 13.964 12.345 12.941 13.082C13.513 13.28 14.052 13.5 14.58 13.731L13.942 14.721C12.314 13.962 10.653 13.368 8.937 12.939L9.542 12.037C10.29 12.224 11.005 12.422 11.687 12.642C12.589 12.092 13.304 11.531 13.821 10.97H8.53C8.794 10.266 9.036 9.529 9.267 8.781H6.506V7.681ZM20.729 4.535H21.884V13.148H23.094V4.535H24.249V13.148H27.417V14.27H17.583V13.148H20.729V4.535ZM26.196 6.614L27.208 6.9C26.79 8.781 26.262 10.431 25.624 11.839L24.59 11.476C25.206 10.2 25.734 8.572 26.196 6.614ZM18.76 6.581C19.31 8.044 19.805 9.727 20.234 11.619L19.189 11.872C18.815 10.156 18.353 8.506 17.781 6.911L18.76 6.581ZM31.003 4.59H32.125V7.373H32.609V8.506H30.189V8.858C30.189 9.155 30.178 9.441 30.167 9.716H32.268V13.731C32.807 12.697 33.093 11.267 33.137 9.463V5.228C34.886 5.195 36.448 4.964 37.834 4.524L38.384 5.547C37.13 5.921 35.722 6.141 34.182 6.207V7.571H38.175V8.55C37.933 9.98 37.504 11.201 36.866 12.202C37.35 12.84 37.944 13.324 38.637 13.665L38.065 14.688C37.317 14.292 36.679 13.775 36.162 13.126C35.59 13.764 34.93 14.281 34.16 14.699L33.621 13.665C34.358 13.258 34.985 12.752 35.491 12.158C34.952 11.19 34.578 10.024 34.38 8.649H34.182V9.463C34.138 11.608 33.753 13.324 33.038 14.6L32.268 13.764V14.6H31.146V10.805H30.112C29.98 12.389 29.683 13.621 29.243 14.479L28.374 13.72C28.814 12.708 29.045 11.08 29.056 8.858V4.799H30.189V7.373H31.003V4.59ZM35.414 8.649C35.59 9.595 35.854 10.42 36.206 11.135C36.624 10.387 36.91 9.562 37.075 8.649H35.414Z" fill="url(#paint2_linear_por)"/>
              <defs>
                <linearGradient id="paint0_linear_por" x1="11.6129" y1="-1.28567e-06" x2="31.5409" y2="21.6958" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#383B51"/>
                  <stop offset="1" stop-color="#302B3B"/>
                </linearGradient>
                <linearGradient id="paint1_linear_por" x1="43.2941" y1="16.0447" x2="7.13079" y2="-5.38639" gradientUnits="userSpaceOnUse">
                  <stop offset="0.173077" stop-color="#302B3B"/>
                  <stop offset="0.531062" stop-color="#8C8FC4"/>
                  <stop offset="0.918269" stop-color="#393C52"/>
                </linearGradient>
                <linearGradient id="paint2_linear_por" x1="22.5" y1="2.5" x2="22.5" y2="15.5" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#F8E6B8"/>
                  <stop offset="0.3" stop-color="white"/>
                  <stop offset="1" stop-color="#F8E6B8"/>
                </linearGradient>
              </defs>
            </svg>
            <span class="user-version">V1.5.60</span>
          </div>
        </div>
      </div>
    </div>
  </aside>
</template>

<script setup lang="ts">
import { computed, h } from 'vue'
import { storeToRefs } from 'pinia'
import { useAppStore, useChatStore } from '@/stores'
import type { HistoryItem } from '@/types'

// Stores
const appStore = useAppStore()
const chatStore = useChatStore()
const { activeNav } = storeToRefs(appStore)
const { historyItems } = storeToRefs(chatStore)

// 图标组件 - 根据 Figma 设计 (search.svg)
const SearchIcon = {
  render() {
    return h('svg', {
      width: '20',
      height: '20',
      viewBox: '0 0 20 20',
      fill: 'none'
    }, [
      h('path', {
        d: 'M13.4605 0.0322224C13.4693 -0.0107409 13.5307 -0.0107408 13.5395 0.0322226C13.9952 2.26211 15.7379 4.00475 17.9678 4.46053C18.0107 4.46931 18.0107 4.53069 17.9678 4.53947C15.7379 4.99525 13.9952 6.73789 13.5395 8.96778C13.5307 9.01074 13.4693 9.01074 13.4605 8.96778C13.0048 6.73789 11.2621 4.99525 9.03222 4.53947C8.98926 4.53069 8.98926 4.46931 9.03222 4.46053C11.2621 4.00475 13.0048 2.26211 13.4605 0.0322224Z',
        fill: 'url(#paint0_linear_search)'
      }),
      h('path', {
        d: 'M14.0741 14.0743L13.5084 13.5086L14.0741 14.0743ZM4.64598 14.0743L4.0803 14.64L4.64598 14.0743ZM4.64598 4.64624L4.0803 4.08055L4.64598 4.64624ZM16.4547 17.5863C16.7671 17.8987 17.2736 17.8987 17.586 17.5863C17.8985 17.2739 17.8985 16.7673 17.586 16.4549L17.0203 17.0206L16.4547 17.5863ZM8.60241 3.54241C9.04059 3.48571 9.34984 3.08454 9.29314 2.64636C9.23645 2.20819 8.83527 1.89894 8.3971 1.95564L8.49976 2.74902L8.60241 3.54241ZM16.8236 9.57787C16.8364 9.13623 16.4887 8.76782 16.0471 8.75502C15.6054 8.74222 15.237 9.08986 15.2242 9.5315L16.0239 9.55468L16.8236 9.57787ZM14.0741 14.0743L13.5084 13.5086C11.2173 15.7997 7.50274 15.7997 5.21167 13.5086L4.64598 14.0743L4.0803 14.64C6.99621 17.5559 11.7238 17.5559 14.6398 14.64L14.0741 14.0743ZM4.64598 14.0743L5.21167 13.5086C2.92059 11.2176 2.92059 7.503 5.21167 5.21192L4.64598 4.64624L4.0803 4.08055C1.16438 6.99647 1.16438 11.7241 4.0803 14.64L4.64598 14.0743ZM14.0741 14.0743L13.5084 14.64L16.4547 17.5863L17.0203 17.0206L17.586 16.4549L14.6398 13.5086L14.0741 14.0743ZM4.64598 4.64624L5.21167 5.21192C6.16485 4.25874 7.3623 3.70287 8.60241 3.54241L8.49976 2.74902L8.3971 1.95564C6.8188 2.15986 5.29205 2.8688 4.0803 4.08055L4.64598 4.64624ZM16.0239 9.55468L15.2242 9.5315C15.1823 10.9763 14.6107 12.4063 13.5084 13.5086L14.0741 14.0743L14.6398 14.64C16.0421 13.2377 16.7703 11.4146 16.8236 9.57787L16.0239 9.55468Z',
        fill: 'black'
      }),
      h('defs', {}, [
        h('linearGradient', {
          id: 'paint0_linear_search',
          x1: '17.3612',
          y1: '7.22222',
          x2: '11.7224',
          y2: '2.77778',
          gradientUnits: 'userSpaceOnUse'
        }, [
          h('stop', { 'stop-color': '#020FFE' }),
          h('stop', { offset: '1', 'stop-color': '#49DFF6' })
        ])
      ])
    ])
  }
}

// 图标组件 - 根据 Figma 设计 (license-maintenance.svg)
const BookIcon = {
  render() {
    return h('svg', {
      width: '20',
      height: '20',
      viewBox: '0 0 20 20',
      fill: 'none'
    }, [
      h('g', { 'clip-path': 'url(#clip0_license)' }, [
        h('path', {
          d: 'M9.60768 18.3332H8.72533C5.39777 18.3332 3.73399 18.3332 2.70024 17.3569C1.6665 16.3805 1.6665 14.8092 1.6665 11.6665L1.6665 8.33317C1.6665 5.19047 1.6665 3.61913 2.70025 2.64281C3.73399 1.6665 5.39777 1.6665 8.72533 1.6665L9.60768 1.6665C12.9352 1.6665 14.599 1.6665 15.6328 2.64281C16.6665 3.61913 16.6665 5.19047 16.6665 8.33317V8.74984',
          stroke: '#4E5969',
          'stroke-width': '1.6',
          'stroke-linecap': 'round'
        }),
        h('path', {
          d: 'M6 7H12.6667',
          stroke: '#4E5969',
          'stroke-width': '1.6',
          'stroke-linecap': 'round'
        }),
        h('path', {
          d: 'M6 11.1665H10.1667',
          stroke: '#4E5969',
          'stroke-width': '1.6',
          'stroke-linecap': 'round'
        }),
        h('path', {
          d: 'M15.4649 11.5286C15.4727 11.4905 15.5273 11.4905 15.5351 11.5286C15.9402 13.5108 17.4892 15.0598 19.4714 15.4649C19.5095 15.4727 19.5095 15.5273 19.4714 15.5351C17.4892 15.9402 15.9402 17.4892 15.5351 19.4714C15.5273 19.5095 15.4727 19.5095 15.4649 19.4714C15.0598 17.4892 13.5108 15.9402 11.5286 15.5351C11.4905 15.5273 11.4905 15.4727 11.5286 15.4649C13.5108 15.0598 15.0598 13.5108 15.4649 11.5286Z',
          fill: '#4E5969'
        })
      ]),
      h('defs', {}, [
        h('clipPath', { id: 'clip0_license' }, [
          h('rect', { width: '20', height: '20', fill: 'white' })
        ])
      ])
    ])
  }
}

// 图标组件 - 根据 Figma 设计 (pen.svg)
const PenIcon = {
  render() {
    return h('svg', {
      width: '21',
      height: '20',
      viewBox: '0 0 21 20',
      fill: 'none'
    }, [
      h('path', {
        d: 'M8.46687 17.1905L8.50739 17.9895V17.9895L8.46687 17.1905ZM12.5224 16.9848L12.4819 16.1859H12.4819L12.5224 16.9848ZM16.3599 13.9018L15.5884 13.6901V13.6901L16.3599 13.9018ZM16.5188 13.3227L17.2903 13.5344V13.5344L16.5188 13.3227ZM15.4385 9.24125L14.8728 9.80694V9.80694L15.4385 9.24125ZM12.0088 5.81158L12.5745 5.24589V5.24589L12.0088 5.81158ZM7.7156 3.95973C7.28953 4.07667 7.03893 4.51686 7.15586 4.94293C7.2728 5.36901 7.713 5.61961 8.13907 5.50267L7.92734 4.7312L7.7156 3.95973ZM10.6926 4.67918L11.0545 3.96571L11.0545 3.96571L10.6926 4.67918ZM9.6314 4.39827L9.59292 5.19735V5.19735L9.6314 4.39827ZM16.8518 11.6186L16.0527 11.6571V11.6571L16.8518 11.6186ZM16.5709 10.5574L17.2843 10.1955L17.2843 10.1955L16.5709 10.5574ZM14.6126 16.6955L14.9434 17.4239V17.4239L14.6126 16.6955ZM15.627 15.8806L16.267 16.3606L16.267 16.3606L15.627 15.8806ZM5.44882 17.0197L5.10015 17.7397H5.10015L5.44882 17.0197ZM4.23035 15.8012L3.51033 16.1499H3.51033L4.23035 15.8012ZM4.80524 15.3134C4.49282 15.6258 4.49282 16.1323 4.80524 16.4447C5.11766 16.7572 5.62419 16.7572 5.93661 16.4447L5.37093 15.8791L4.80524 15.3134ZM9.95828 12.4231C10.2707 12.1107 10.2707 11.6041 9.95828 11.2917C9.64586 10.9793 9.13933 10.9793 8.82691 11.2917L9.3926 11.8574L9.95828 12.4231ZM16.1985 10.0013L15.6328 10.567L16.1049 11.0391L16.6539 10.659L16.1985 10.0013ZM11.2488 5.05152L10.591 4.59615L10.211 5.1451L10.6831 5.61721L11.2488 5.05152ZM19.1911 6.52153L19.9642 6.3157V6.3157L19.1911 6.52153ZM17.4617 9.12673L17.0064 8.46898V8.46898L17.4617 9.12673ZM19.0833 7.71724L18.3595 7.37645V7.37645L19.0833 7.71724ZM14.7285 2.05891L14.9343 1.28584V1.28584L14.7285 2.05891ZM12.1233 3.7883L11.4655 3.33294V3.33294L12.1233 3.7883ZM13.5328 2.16673L13.8736 2.89051V2.89051L13.5328 2.16673ZM4.82138 13.5898C4.84053 13.1484 4.49822 12.7751 4.05681 12.7559C3.61539 12.7368 3.24204 13.0791 3.22289 13.5205L4.02214 13.5552L4.82138 13.5898ZM8.46687 17.1905L8.50739 17.9895L12.5629 17.7838L12.5224 16.9848L12.4819 16.1859L8.42636 16.3915L8.46687 17.1905ZM16.3599 13.9018L17.1314 14.1136L17.2903 13.5344L16.5188 13.3227L15.7474 13.111L15.5884 13.6901L16.3599 13.9018ZM15.4385 9.24125L16.0042 8.67557L12.5745 5.24589L12.0088 5.81158L11.4431 6.37726L14.8728 9.80694L15.4385 9.24125ZM12.0088 5.81158L12.5745 5.24589C11.9841 4.65552 11.5681 4.22625 11.0545 3.96571L10.6926 4.67918L10.3307 5.39264C10.563 5.51047 10.7759 5.71001 11.4431 6.37726L12.0088 5.81158ZM7.92734 4.7312L8.13907 5.50267C9.04906 5.25292 9.33274 5.18482 9.59292 5.19735L9.6314 4.39827L9.66988 3.5992C9.09461 3.5715 8.52073 3.73875 7.7156 3.95973L7.92734 4.7312ZM10.6926 4.67918L11.0545 3.96571C10.624 3.74732 10.1521 3.62242 9.66988 3.5992L9.6314 4.39827L9.59292 5.19735C9.84986 5.20972 10.1013 5.27627 10.3307 5.39264L10.6926 4.67918ZM16.5188 13.3227L17.2903 13.5344C17.5113 12.7293 17.6785 12.1554 17.6508 11.5802L16.8518 11.6186L16.0527 11.6571C16.0652 11.9173 15.9971 12.201 15.7474 13.111L16.5188 13.3227ZM15.4385 9.24125L14.8728 9.80694C15.54 10.4742 15.7396 10.687 15.8574 10.9193L16.5709 10.5574L17.2843 10.1955C17.0238 9.6819 16.5945 9.26593 16.0042 8.67557L15.4385 9.24125ZM16.8518 11.6186L17.6508 11.5802C17.6276 11.0979 17.5027 10.6261 17.2843 10.1955L16.5709 10.5574L15.8574 10.9193C15.9738 11.1488 16.0403 11.4002 16.0527 11.6571L16.8518 11.6186ZM12.5224 16.9848L12.5629 17.7838C13.5851 17.732 14.3171 17.7084 14.9434 17.4239L14.6126 16.6955L14.2818 15.9671C13.9995 16.0954 13.6409 16.1271 12.4819 16.1859L12.5224 16.9848ZM16.3599 13.9018L15.5884 13.6901C15.2813 14.8092 15.173 15.1525 14.987 15.4006L15.627 15.8806L16.267 16.3606C16.6797 15.8103 16.8605 15.1006 17.1314 14.1136L16.3599 13.9018ZM14.6126 16.6955L14.9434 17.4239C15.4669 17.1862 15.922 16.8205 16.267 16.3606L15.627 15.8806L14.987 15.4006C14.8032 15.6456 14.5607 15.8405 14.2818 15.9671L14.6126 16.6955ZM8.46687 17.1905L8.42636 16.3915C7.60828 16.433 7.04481 16.4609 6.60886 16.4461C6.18129 16.4315 5.95624 16.3765 5.7975 16.2997L5.44882 17.0197L5.10015 17.7397C5.54673 17.956 6.02646 18.0272 6.55447 18.0451C7.07409 18.0628 7.71698 18.0295 8.50739 17.9895L8.46687 17.1905ZM5.44882 17.0197L5.7975 16.2997C5.42784 16.1207 5.12937 15.8222 4.95036 15.4525L4.23035 15.8012L3.51033 16.1499C3.84627 16.8436 4.40641 17.4038 5.10015 17.7397L5.44882 17.0197ZM5.37093 15.8791L5.93661 16.4447L9.95828 12.4231L9.3926 11.8574L8.82691 11.2917L4.80524 15.3134L5.37093 15.8791ZM16.4054 3.40224L15.8397 3.96792C16.083 4.21121 16.3219 4.45017 16.5609 4.68913C16.7999 4.92809 17.0388 5.16705 17.2821 5.41034L17.8478 4.84465L18.4135 4.27896C18.1702 4.03568 17.9312 3.79672 17.6923 3.55776C17.4533 3.3188 17.2144 3.07983 16.9711 2.83655L16.4054 3.40224ZM17.4617 9.12673L17.0064 8.46898L15.7431 9.34352L16.1985 10.0013L16.6539 10.659L17.9171 9.78449L17.4617 9.12673ZM16.1985 10.0013L16.7642 9.43558L11.8145 4.48584L11.2488 5.05152L10.6831 5.61721L15.6328 10.567L16.1985 10.0013ZM11.2488 5.05152L11.9065 5.50689L12.7811 4.24367L12.1233 3.7883L11.4655 3.33294L10.591 4.59615L11.2488 5.05152ZM17.8478 4.84465L17.2821 5.41034C17.6997 5.8279 17.9758 6.10507 18.1671 6.33274C18.3537 6.55487 18.4012 6.66423 18.4181 6.72735L19.1911 6.52153L19.9642 6.3157C19.86 5.92425 19.6433 5.6026 19.3922 5.30365C19.1458 5.01025 18.8108 4.67627 18.4135 4.27896L17.8478 4.84465ZM17.4617 9.12673L17.9171 9.78449C18.3791 9.46467 18.7684 9.19601 19.0633 8.95143C19.3638 8.70223 19.6345 8.42453 19.8071 8.05804L19.0833 7.71724L18.3595 7.37645C18.3317 7.43555 18.2653 7.53463 18.042 7.71979C17.8131 7.90957 17.4919 8.13286 17.0064 8.46898L17.4617 9.12673ZM19.1911 6.52153L18.4181 6.72735C18.4757 6.94385 18.455 7.17375 18.3595 7.37645L19.0833 7.71724L19.8071 8.05804C20.0633 7.51395 20.1189 6.89684 19.9642 6.3157L19.1911 6.52153ZM16.4054 3.40224L16.9711 2.83655C16.5738 2.43925 16.2398 2.10426 15.9464 1.85781C15.6474 1.6067 15.3258 1.39006 14.9343 1.28584L14.7285 2.05891L14.5227 2.83198C14.5858 2.84879 14.6952 2.89637 14.9173 3.08296C15.145 3.27419 15.4221 3.55036 15.8397 3.96792L16.4054 3.40224ZM12.1233 3.7883L12.7811 4.24367C13.1172 3.75817 13.3405 3.43689 13.5302 3.20801C13.7154 2.98472 13.8145 2.91834 13.8736 2.89051L13.5328 2.16673L13.192 1.44295C12.8255 1.61551 12.5478 1.88619 12.2986 2.18672C12.054 2.48167 11.7854 2.87098 11.4655 3.33294L12.1233 3.7883ZM14.7285 2.05891L14.9343 1.28584C14.3532 1.13112 13.7361 1.18677 13.192 1.44295L13.5328 2.16673L13.8736 2.89051C14.0763 2.79507 14.3062 2.77434 14.5227 2.83198L14.7285 2.05891ZM4.02214 13.5552L3.22289 13.5205C3.17648 14.5903 3.16527 15.4373 3.51033 16.1499L4.23035 15.8012L4.95036 15.4525C4.8115 15.1658 4.77139 14.7424 4.82138 13.5898L4.02214 13.5552Z',
        fill: '#4E5969'
      }),
      h('path', {
        d: 'M3.96491 3.47444C3.97272 3.43625 4.02728 3.43625 4.03509 3.47444C4.44022 5.45657 5.98923 7.00558 7.97136 7.41071C8.00955 7.41852 8.00955 7.47308 7.97136 7.48089C5.98923 7.88602 4.44022 9.43503 4.03509 11.4172C4.02728 11.4553 3.97272 11.4553 3.96491 11.4172C3.55978 9.43503 2.01077 7.88602 0.0286422 7.48089C-0.00954748 7.47308 -0.00954734 7.41852 0.0286423 7.41071C2.01077 7.00558 3.55978 5.45657 3.96491 3.47444Z',
        fill: '#4E5969'
      })
    ])
  }
}

// 导航项配置
const navItems = computed(() => [
  { id: 'evidence', label: '证据问询', icon: SearchIcon },
  { id: 'literature', label: '文献助手', icon: BookIcon },
  { id: 'creation', label: '深度创作', icon: PenIcon }
])

// 方法
function handleNavClick(item: { id: string; label: string }) {
  appStore.setActiveNav(item.id)
}

function handleHistoryClick(item: HistoryItem) {
  chatStore.selectConversation(item.id)
}
</script>

<style scoped>
/* 侧边栏主容器 - Figma: width 280px, bg #F3F5F6 */
.sidebar {
  display: flex;
  flex-direction: column;
  width: 280px;
  height: 100%;
  background-color: #F3F5F6;
  border-radius: 0 0 20px 0;
}

/* 顶部 Logo 区域 - padding 20px, gap 16px */
.sidebar-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px;
  gap: 12px;
}

.logo-area {
  display: flex;
  align-items: center;
}

.collapse-btn {
  padding: 4px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.collapse-btn:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

/* 导航区域 - gap 12px */
.nav-section {
  padding: 0 20px;
}

.nav-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* 导航项 - Figma: height 46px, padding 8px 12px, border-radius 8px */
.nav-item {
  display: flex;
  align-items: stretch;
  height: 46px;
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  box-sizing: border-box;
}

.nav-item:hover {
  background-color: #FFFFFF;
}

.nav-item-active {
  background-color: #FFFFFF;
  box-shadow: 0px 1px 3px 0px rgba(25, 33, 61, 0.1);
}

.nav-item-content {
  display: flex;
  align-items: center;
  gap: 8px;
}

.nav-icon {
  width: 20px;
  height: 20px;
  color: #4E5969;
}

.nav-item-active .nav-icon {
  color: #000000;
}

/* 导航标签 - Figma: font-size 14px, font-weight 400/600 */
.nav-label {
  font-family: 'PingFang SC', sans-serif;
  font-weight: 400;
  font-size: 14px;
  line-height: 1.4;
  color: #4E5969;
}

.nav-item-active .nav-label {
  font-weight: 600;
  color: #000000;
}

/* 历史会话区域 - gap 12px */
.history-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 0 20px;
  margin-top: 40px;
  overflow: hidden;
}

.history-title-wrapper {
  padding: 0 12px;
}

.history-title {
  font-family: 'PingFang SC', sans-serif;
  font-weight: 400;
  font-size: 14px;
  line-height: 1.4;
  color: #4E5969;
}

.history-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
  overflow-y: auto;
}

/* 历史项 - Figma: padding 8px 10px 8px 12px, gap 4px */
.history-item {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px 10px 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.history-item:hover {
  background-color: rgba(0, 0, 0, 0.03);
}

.history-dot-wrapper {
  flex-shrink: 0;
}

.history-text-wrapper {
  flex: 1;
  overflow: hidden;
  width: 194px;
}

.history-text {
  font-family: 'PingFang SC', sans-serif;
  font-weight: 400;
  font-size: 14px;
  line-height: 1.4;
  color: #4E5969;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 用户区域 - Figma: width 280px, height 70px, border-top 1px #E5E6EB */
.user-section {
  display: flex;
  align-items: stretch;
  gap: 10px;
  padding: 0 20px;
  width: 280px;
  height: 70px;
  background-color: #F3F5F6;
  border-top: 1px solid #E5E6EB;
}

.user-info-wrapper {
  display: flex;
  align-items: stretch;
  gap: 10px;
  flex: 1;
}

.user-content {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.user-avatar {
  flex-shrink: 0;
  width: 36px;
  height: 36px;
}

.user-details {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  justify-content: space-between;
}

.user-name {
  font-family: 'PingFang SC', sans-serif;
  font-weight: 600;
  font-size: 14px;
  line-height: 1.4;
  color: #000000;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 90px;
}

/* 专业版徽章 SVG */
.user-badge-svg {
  flex-shrink: 0;
}

.user-version {
  font-family: 'PingFang SC', sans-serif;
  font-weight: 400;
  font-size: 12px;
  line-height: 1.4;
  color: #86909C;
  margin-left: auto;
}

/* 滚动条样式 */
.history-list::-webkit-scrollbar {
  width: 4px;
}

.history-list::-webkit-scrollbar-track {
  background: transparent;
}

.history-list::-webkit-scrollbar-thumb {
  background: #C9CDD4;
  border-radius: 2px;
}
</style>
